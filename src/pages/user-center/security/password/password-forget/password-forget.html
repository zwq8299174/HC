<ion-header>
	<ion-navbar>
		<ion-title>{{type?'设置交易密码':'忘记交易密码'}}</ion-title>
	</ion-navbar>
</ion-header>
<ion-content>
	<form #form="ngForm" novalidate (ngSubmit)="forgetPwd()" class="custom-form">
		<ion-item [ngClass]="{'error': (form.controls.mobile?.touched||form.submitted)&&(form.controls.mobile?.errors?.required)||(form.controls.mobile?.errors?.minlength)||(form.controls.mobile?.errors?.maxlength)}">
			<ion-label fixed="fixed">手机号</ion-label>
			<ion-input name="mobile" pattern="^1[3|4|5|8][0-9]{9}$" type="tel" value="" placeholder="请输入手机号码" [(ngModel)]="mobile" required minlength="11" maxlength="11"></ion-input>
		</ion-item>
		<ion-item [ngClass]="{'error': (form.controls.code?.touched||form.submitted)&&(form.controls.code?.errors?.required)||(form.controls.code?.errors?.maxlength)||(form.controls.code?.errors?.minlength)}">
			<ion-label fixed>验证码</ion-label>
			<ion-input name="code" required minlength="4" maxlength="4" type="number" [(ngModel)]="code" placeholder="请输入验证码" ></ion-input>
			<a class="get-code" [ngClass]="{'disabled': form.controls.mobile?.invalid||this.time < 59}" ion-button color="light" item-end (click)="getCode()">{{codeTxt}}</a>
		</ion-item>
		<ion-item [ngClass]="{'error': (form.controls.newPassword?.touched||form.submitted)&&(form.controls.newPassword?.errors?.required)||(form.controls.newPassword?.errors?.minlength)}">
			<ion-label fixed="fixed">新交易密码</ion-label>
			<ion-input name="newPassword"  type="password" value="" placeholder="请输入新交易密码" [(ngModel)]="newPwd" required minlength="6" maxlength="6"></ion-input>
		</ion-item>
		<ion-item [ngClass]="{'error': (form.controls.againPassword?.touched||form.submitted)&&(form.controls.againPassword?.errors?.required)||againPwd!=newPwd}">
			<ion-label fixed="fixed">确认交易密码</ion-label>
			<ion-input name="againPassword" type="password" value="" placeholder="请再次输入新交易密码" [(ngModel)]="againPwd" required maxlength="6" minlength="6"></ion-input>
		</ion-item>
		<button class="submit" type="submit" ion-button block [disabled] = "form.invalid">确认</button>
	</form>
</ion-content>
